{"version":3,"sources":["src/services/getMap.js"],"names":[],"mappings":"AAAA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,YAAY;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD,0CAA0C,qCAAqC;AAC/E;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,UAAU;AAClE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD,0CAA0C,qCAAqC;AAC/E;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB,aAAa,cAAc;AACxG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD,0CAA0C,qCAAqC;AAC/E;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL","file":"scripts.js","sourcesContent":["var apiURL = 'https://9bf16658.ngrok.io';\r\n\r\nymaps.ready(init);\r\n\r\nvar myMap;\r\n\r\nfunction init() {\r\n    myMap = new ymaps.Map('map', {\r\n        center: [55.76, 37.64],\r\n        zoom: 10,\r\n        controls: [\r\n            \"zoomControl\"\r\n        ]\r\n    });\r\n    myMap.controls.get('zoomControl').options.set('position', {\r\n        bottom: \"130px\",\r\n        right: \"15px\"\r\n    });\r\n}\r\nfunction GetMap(json) {\r\n    if (json == {}) {\r\n        return;\r\n    }\r\n    var objectManager = new ymaps.ObjectManager();\r\n    // Добавляем описание объектов в формате JSON в менеджер объектов.\r\n    objectManager.add(json);\r\n    // Добавляем объекты на карту.\r\n    myMap.geoObjects.add(objectManager);\r\n}\r\n\r\nvar find = function (arr, find) {\r\n    return arr.filter(function (value) {\r\n        return value.toString().toLowerCase().indexOf(find.toLowerCase()) != -1;\r\n    });\r\n};\r\n\r\nfunction getCitiesSuggestions() {\r\n    ymaps.ready(function init() {\r\n        var suggestView1 = new ymaps.SuggestView('toCity', {\r\n            results: 5\r\n        });\r\n        var suggestView2 = new ymaps.SuggestView('fromCity', {\r\n            results: 5\r\n        });\r\n    });\r\n}\r\n\r\nflightRouteData = {\r\n    arrayStArrival: [],\r\n    arrayStDeparture: []\r\n};\r\n\r\nfunction getSuggestionsOfStDeparture(stDeparture) {\r\n    ymaps.ready(function init() {\r\n        var xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.onreadystatechange = function () {\r\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n                flightRouteData['arrayStDeparture'] = JSON.parse(xmlHttp.responseText);\r\n            }\r\n        }\r\n        xmlHttp.open(\"GET\", apiURL + `/stations?city=\"${stDeparture}\"`, true);\r\n        xmlHttp.send();\r\n\r\n        var suggestView3 = new ymaps.SuggestView('stDeparture', {\r\n            results: 7,\r\n            provider: {\r\n                suggest: function (request, options) {\r\n                    var res = find(Object.keys(flightRouteData['arrayStDeparture']), request),\r\n                        arrayResult = [],\r\n                        results = Math.min(options.results, res.length);\r\n                    for (var i = 0; i < results; i++) {\r\n                        arrayResult.push({ displayName: res[i], value: res[i] })\r\n                    }\r\n                    return ymaps.vow.resolve(arrayResult);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getSuggestionsOfStArrival(stArrival) {\r\n    ymaps.ready(function init() {\r\n        var xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.onreadystatechange = function () {\r\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n                flightRouteData['arrayStArrival'] = JSON.parse(xmlHttp.responseText)\r\n            }\r\n        }\r\n        xmlHttp.open(\"GET\", apiURL + `/stations?city=\"${stArrival}\"`, true);\r\n        xmlHttp.send();\r\n\r\n        var suggestView4 = new ymaps.SuggestView('stArrival', {\r\n            results: 7,\r\n            provider: {\r\n                suggest: function (request, options) {\r\n                    var res = find(Object.keys(flightRouteData['arrayStArrival']), request),\r\n                        arrayResult = [],\r\n                        results = Math.min(options.results, res.length);\r\n                    for (var i = 0; i < results; i++) {\r\n                        arrayResult.push({ displayName: res[i], value: res[i] })\r\n                    }\r\n                    return ymaps.vow.resolve(arrayResult);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getSuggestionsOfTrainFlight(trainFlightFrom, trainFlightTo) {\r\n    ymaps.ready(function init() {\r\n        var arr = [];\r\n\r\n        var xmlHttp = new XMLHttpRequest();\r\n        xmlHttp.onreadystatechange = function () {\r\n            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n                arr = JSON.parse(xmlHttp.responseText)\r\n                console.log(arr);\r\n            }\r\n        }\r\n        xmlHttp.open(\"POST\", apiURL + `/routes?start_point=${trainFlightFrom}&end_point=${trainFlightTo}`, true);\r\n        xmlHttp.send();\r\n\r\n        var suggestView5 = new ymaps.SuggestView('trainFlight', {\r\n            results: 5,\r\n            provider: {\r\n                suggest: function (request, options) {\r\n                    var res = find(Object.values(arr), request),\r\n                        arrayResult = [],\r\n                        results = Math.min(options.results, res.length);\r\n                    for (var i = 0; i < results; i++) {\r\n                        arrayResult.push({ displayName: res[i], value: res[i] })\r\n                    }\r\n                    return ymaps.vow.resolve(arrayResult);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n"],"sourceRoot":"webpack:///"}